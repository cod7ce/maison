!function(a,b){var c=function(a,c){this.$sidebar=b(a),this.$body=b(document.body),this.$content=this.$body.find(".jsc-sidebar-content"),this.sidebarW=this.$sidebar.width(),this.opts=c,this.meta=this.$sidebar.data("sidebar-options")};c.prototype={defaults:{trigger:null,scrollbarDisplay:!1,pullCb:function(){},pushCb:function(){}},init:function(){return this.config=b.extend({},this.defaults,this.opts,this.meta),this.$trigger=this.config.trigger?this.$body.find(this.config.trigger):this.$body.find(".jsc-sidebar-trigger"),this.detect3dEnabled(),this.attachEvent(),this},pushTransitionEndEvent:"transitionEnd.push webkitTransitionEnd.push transitionend.push msTransitionEnd.push",pullTransitionEndEvent:"transitionEnd.pull webkitTransitionEnd.pull transitionend.pull msTransitionEnd.pull",isAndroid:function(){var b=a.navigator.userAgent.toLowerCase(),c=b.indexOf("android")>-1;return c},hasTranslate3dSupport:function(){var b,c=document.createElement("p"),d={transform:"transform",webkitTransform:"-webkit-transform",MozTransform:"-moz-transform",msTransform:"-ms-transform"};this.$body[0].insertBefore(c,null);for(var e in d)void 0!==c.style[e]&&(c.style[e]="translate3d(1px, 1px, 1px)",b=a.getComputedStyle(c).getPropertyValue(d[e]));return this.$body[0].removeChild(c),void 0!==b&&b.length&&"none"!==b},detect3dEnabled:function(){(this.isAndroid()||!this.hasTranslate3dSupport())&&this.$content.removeClass("jsc-sidebar-pulled")},attachEvent:function(){this.$trigger.on("click",b.proxy(function(a){a.preventDefault(),this.push()},this)),this.$content.on(this.pushTransitionEndEvent,b.proxy(function(){this.detectPushEnd(),this.config.pushCb()},this)).on("click",b.proxy(function(){this.pull()},this))},push:function(){this.isAndroid()||!this.hasTranslate3dSupport()?this.slidePush():this.$content.removeClass("jsc-sidebar-pull-end").addClass("jsc-sidebar-pushed")},pull:function(){if(this.isAndroid()||!this.hasTranslate3dSupport())this.slidePull();else{if(!this.$content.hasClass("jsc-sidebar-push-end"))return;this.$content.removeClass("jsc-sidebar-pushed")}},slidePull:function(){1===this.$content.data("sidebar-first-click")&&this.$content.hasClass("jsc-sidebar-opened")&&this.$content.stop().animate({marginLeft:0}).promise().done(b.proxy(function(){this.$content.removeClass("jsc-sidebar-opened"),!this.config.scrollbarDisplay&&this.$content.removeClass("jsc-sidebar-scroll-disabled"),this.config.pullCb()},this))},slidePush:function(){var a=this.sidebarW+"px";this.$content.stop().animate({marginLeft:a}).promise().done(b.proxy(function(){this.$content.addClass("jsc-sidebar-opened"),!this.config.scrollbarDisplay&&this.$content.addClass("jsc-sidebar-scroll-disabled"),this.$content.data("sidebar-first-click")||this.$content.data("sidebar-first-click",1),this.config.pushCb()},this))},detectPushEnd:function(){this.$content.addClass("jsc-sidebar-opened"),!this.config.scrollbarDisplay&&this.$content.addClass("jsc-sidebar-scroll-disabled"),this.$content.addClass("jsc-sidebar-push-end").off(this.pushTransitionEndEvent).on(this.pullTransitionEndEvent,b.proxy(function(){this.detectPullEnd(),this.config.pullCb()},this))},detectPullEnd:function(){this.$content.removeClass("jsc-sidebar-disabled"),!this.config.scrollbarDisplay&&this.$content.removeClass("jsc-sidebar-scroll-disabled"),this.$content.removeClass("jsc-sidebar-push-end").addClass("jsc-sidebar-pull-end").off(this.pullTransitionEndEvent).on(this.pushTransitionEndEvent,b.proxy(function(){this.detectPushEnd(),this.config.pushCb()},this))}},c.defaults=c.prototype.defaults,b.fn.sidebar=function(a){return this.each(function(){new c(this,a).init()})},a.Sidebar=c}(window,jQuery);